// Defra charts
//
// Transforms a table and ticks element in to a bar chart

// Reset table properties
.defra-bar-chart {
    position:relative;
    padding-left:50px;
    margin:0px;
    @include mq ($from: tablet) {
        padding-left:58px;
        padding-bottom:25px;
    }
    table {
        display: block;
        position:relative;
        width:100%;
        @include mq ($from: tablet) {
            width:80%;
        }
        margin:0px;
    }
    thead {
        @extend .govuk-visually-hidden;
    }
    tbody {
        display: block;
        position:relative;
        z-index:2;
        left:-2px;
        width:100%;
        height:200px;
        @include mq ($from: tablet) {
            height:360px;
        }
        border-left:2px solid $govuk-border-colour;
        border-bottom:2px solid $govuk-border-colour;
    }
    tfoot {
        position:absolute;
        z-index:1;
        width:100%;
        left:-2px;
        height:200px;
        @include mq ($from: tablet) {
            height:360px;
        }
        border-left:2px solid transparent;
        border-bottom:2px solid transparent;
        bottom:0px;
    }
    td {
        position:absolute;
        bottom:0px;
    }
}
.defra-bar-chart__caption {
    display:block;
    position:relative;
    margin-left:-50px;
    margin-bottom:30px;
    @include mq ($from: tablet) {
        margin-left:-58px;
        margin-bottom:40px;
    }
    margin-right:0px;
    text-align:left;
}
.defra-bar-chart__inner {
    position:relative;
}
.defra-bar-chart__legend {
    position:relative;
    box-sizing:border-box;
    @extend .govuk-body-s;
    margin-top:40px;
    margin-bottom:0px;
    padding-left:25px;
    @include mq ($until: tablet) {
        bottom:auto !important;
    }
    @include mq ($from: tablet) {
        position:absolute;
        display: table; 
        width:20%;
        right:0px;
        padding-left:15px;
        height:100px;
        margin-bottom:-50px;
    }
    .defra-bar-chart__legend--inner {
        display: table-cell; 
        width:100%;
        height:100%;
        vertical-align: middle;
        text-align: left;
    }
}

.defra-bar-chart__legend:before {
    @include mq ($until: tablet) {
        position:absolute;
        content:'';
        left:0px;
        top:50%;
        margin-top:-2px;
        width:15px;
        height:2px;
        background-color: govuk-colour('black');
    }
}  
.defra-bar-chart__h-value-inner {
    position:absolute;
    left:2px;
    right:2px;
    @include mq ($from: tablet) {
        left:4px;
        right:4px;
    }
    height:100%;
    text-indent:-5000px;
    background-color: govuk-colour('light-blue');
}
.defra-bar-chart__h-tick {
    display:block;
    font-family: "ntatabularnumbers","nta",Arial,sans-serif;
    top:100%;
    text-align:center;
    padding-top:7px;
}
.defra-bar-chart__h-tick:before {
    position:absolute;
    content:'';
    left:50%;
    top:0px;
    width:2px;
    height:5px;
    background-color: govuk-colour('grey-2');
}   
// Quick mobile fix but may not work for other offsets and increments
tr:nth-of-type(2n) .defra-bar-chart__h-tick {
    @include mq ($until: tablet) {
        position: absolute !important;
        width: 1px !important;
        height: 1px !important;
        margin: -1px !important;
        padding: 0 !important;
        overflow: hidden !important;
        clip: rect(0 0 0 0) !important;
        -webkit-clip-path: inset(50%) !important;
        clip-path: inset(50%) !important;
        border: 0 !important;
        white-space: nowrap !important;
    }
}
.defra-bar-chart__v-tick {
    position:absolute;
    left:0px;
    right:0px;
    border-bottom:1px solid $govuk-border-colour;
}
.defra-bar-chart__v-tick:first-child {
    border:0px;
}
.defra-bar-chart__v-tick:last-child {
    margin-bottom:-1px;
}
.defra-bar-chart__v-tick-label {
    position:absolute;
    font-family: "ntatabularnumbers","nta",Arial,sans-serif;
    right:100%;
    @extend .govuk-body-s;
    height:1em;
    margin-top:-0.5em;
    margin-right:10px;
}   
.defra-bar-chart__v-tick--threshold {
    position:relative;
    border-bottom:2px solid govuk-colour('black');
} 
