{% extends 'layout.html' %}

{% from "error-summary/macro.njk" import govukErrorSummary %}
{% from "input/macro.njk" import govukInput %}

{% block content %}
<div class="govuk-grid-row">
  <div class="govuk-grid-column-full">
    {% if model.err.errorMessage %}
    {{ govukErrorSummary({
      titleText: "There is a problem",
      errorList: [
        {
          text: model.err.errorMessage,
          href: "#location"
        }
      ]
    }) }}
    {% elif errorMessage %}
        {{ govukErrorSummary({
      titleText: "There is a problem",
      errorList: [
        {
          text: errorMessage,
          href: "#location"
        }
      ]
    }) }}
    {% endif %}
    <h1 class="govuk-heading-xl">Where do you want to check?</h1>
    <form method="post">
      {% if model.err.errorMessage %}
      {{ govukInput({
        label: {
          text: "Town, city or postcode"
        },
        errorMessage: {
          "text": model.err.errorMessage
        },
        id: "location",
        name: "location",
        value: model.location,
        attributes: {
          autocomplete: "off",
          autocorrect: "off",
          autocapitalize: "off",
          spellcheck: "false"
        },
        classes: "govuk-!-width-one-half"
      }) }}
      {% elif errorMessage %}
            {{ govukInput({
        label: {
          text: "Town, city or postcode"
        },
        errorMessage: {
          "text": errorMessage
        },
        id: "location",
        name: "location",
        attributes: {
          autocomplete: "off",
          autocorrect: "off",
          autocapitalize: "off",
          spellcheck: "false"
        },
        classes: "govuk-!-width-one-half"
      }) }}
      {% else %}
      {{ govukInput({
        label: {
          text: "Enter postcode, town or county"
        },
        id: "location",
        name: "location",
        value: test,
        attributes: {
          autocomplete: "off",
          autocorrect: "off",
          autocapitalize: "off",
          maxlength: 200,
          spellcheck: "false"
        },
        classes: "govuk-!-width-one-half"
      }) }}
      {% endif %}
      <button type="submit" class="govuk-button">Continue</button>
    </form>
    <p><a href="/">Or check for flooding in all of England</a></p>
  </div>
</div>
{% endblock %}
