{% extends 'layout.html' %}

{% macro severity(panel) %}
<div class="accordion__section" id="{{panel.name}}">
  <div class="accordion__section-container">
    <div class="accordion__section-header">
      <h2 class="accordion__section-title">
        {{panel.title}}
      </h2>
      <p class="accordion__description">{{panel.description}}</p>
    </div>
    <div class="accordion__section-content" id="{{panel.name}}-content">
      {% if panel.floods %}
        <ul class="govuk-list govuk-list--warning">
          {% for flood in panel.floods %}
            <li><a href="/target-area/{{flood.fwaCode}}">{{ flood.description }}</a></li>
          {% endfor %}
        </ul>
      {% endif %}
    </div>
  </div>
</div>
{% endmacro %}

{% block content %}
<div class="govuk-grid-row">
  <div class="govuk-grid-column-two-thirds">

    <h1 class="govuk-heading-xl govuk-!-margin-bottom-2">
      <span class="govuk-caption-xl">Flood risk</span>{{ model.location }}
    </h1>
    <p class="govuk-body govuk-!-margin-bottom-8"><a href="/">Change location</a> | <a href="/national">Flood
        risk for England</a></p>
  </div>
</div>
<div class="govuk-grid-row">
  <div class="govuk-grid-column-full">
    <div class="govuk-tabs govuk-!-margin-bottom-2" data-module="tabs">
      <h2 class="govuk-tabs__title">Contents</h2>
      <ul class="govuk-tabs__list">
        <li class="govuk-tabs__list-item">
          <a class="govuk-tabs__tab" href="#now">Now</a>
        </li>
        <li class="govuk-tabs__list-item">
          <a class="govuk-tabs__tab" href="#outlook">Next 5 days</a>
        </li>
      </ul>
      <section class="govuk-tabs__panel govuk-tabs__panel--risk-detail" id="now">
        <div class="app-risk-detail">
          <div class="app-risk-detail__copy">
            <div class="app-risk-detail__copy-container">
              <div class="app-risk-detail__copy-inner">
                <div id="warnings" class="accordion govuk-!-margin-bottom-4">
                  {% for panel in model.panels %}
                    {{ severity(panel) }}
                  {% endfor %}
                </div>
              </div>
            </div>
          </div>
          <div class="app-risk-detail__vis">
            <figure class="map map--large" id="map-now">
              <div class="map__container">
                <div class="map__container-inner">
                </div>
              </div>
              <figcaption class="govuk-visually-hidden">Flood warnings and river and sea levels</figcaption>
            </figure>
          </div>
        </div>
      </section>
      <section class="govuk-tabs__panel govuk-tabs__panel--risk-detail" id="outlook">
        <div class="app-risk-detail">
          <div class="app-risk-detail__copy">
            <div class="app-risk-detail__copy-container">
              <div class="app-risk-detail__copy-inner">
                <h2 class="govuk-heading-m govuk-!-margin-top-2">Next 5 days</h2>
                {#{% include "includes/location/outlook.html" %}#}
              </div>
            </div>
          </div>
          <div class="app-risk-detail__vis">
            <figure class="map map--large" id="map-outlook">
              <div class="map__container">
                <div class="map__container-inner">
                </div>
              </div>
              <figcaption class="govuk-visually-hidden">5 day flood forecast</figcaption>
            </figure>
          </div>
        </div>
      </section>
    </div>
  </div>
</div>
<div class="govuk-grid-row">
  <div class="govuk-grid-column-two-thirds">
    <div class="govuk-inset-text govuk-!-margin-top-4">
      <p>If you live in this area you may be able to get flood warnings by phone, text or email. <a href="https://www.gov.uk/sign-up-for-flood-warnings">Sign
          up for flood warnings</a></p>
      <p>Parts of this area may experience flooding from other sources in the future. <a href="https://flood-warning-information.service.gov.uk/long-term-flood-risk">View
          long term flood risk information for this area</a>.</p>
    </div>
    <h2 class="govuk-heading-m">What to do before, during and after a flood</h2>
    <ul class="govuk-list">
      <li><a class="govuk-link" href="https://flood-warning-information.service.gov.uk/plan-ahead-for-flooding">How to
          plan ahead for flooding</a></li>
      <li><a class="govuk-link" href="https://flood-warning-information.service.gov.uk/what-to-do-in-a-flood">What to
          do in a flood</a></li>
      <li><a class="govuk-link" href="https://flood-warning-information.service.gov.uk/recovering-after-a-flood">How to
          recover after a flood</a></li>
    </ul>
  </div>
</div>
{% endblock %}

{% block bodyEnd %}
  {{ super() }}
  <script src="{{assetPath}}/javascripts/ol.js"></script>
  <script src="{{assetPath}}/javascripts/components/map.js"></script>
  <script src="{{assetPath}}/javascripts/components/accordion.js"></script>
  <script>
    window.Flood.model = {{ model | dump(2) | safe }}
  </script>
  <script src="{{assetPath}}/javascripts/pages/location.js"></script>
{% endblock %}