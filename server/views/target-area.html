{% extends 'layout.html' %}

{% block content %}
  <div id="target-area-page" class="govuk-grid-row">
    <div class="govuk-grid-column-two-thirds">
      {% if model.severity %}
        {% if model.severity.isActive %}
          <span class="govuk-caption-xl">
            <i class="flood-icon flood-icon--{{model.severity.name}}">
              <span class="visually-hidden">{{model.severity.title}}</span>
            </i>
            {{model.severity.title}} in force now
          </span>
        {% else %}
          <span class="govuk-caption-xl">{{model.severity.title}}</span>
        {% endif %}
      {% else %}
        <span class="govuk-caption-xl">
          There are currently no flood warnings or alerts in force at this location
        </span>
      {% endif %}
      <h1 class="govuk-heading-xl govuk-!-margin-bottom-2">{{model.area.name}}</h1>
      <p class="govuk-body-l govuk-!-margin-bottom-2">{{model.area.description}}</p>
    </div>
    <div class="govuk-grid-column-two-thirds">
      {% if model.flood %}
        <div class="govuk-inset-text">
          {% if model.severity.isActive %}
            <p><strong class="govuk-!-font-weight-bold">{{model.severity.subTitle}} - {{model.severity.tagline.toLowerCase()}}</strong></p>
          {% else %}
            <p>Last time in force: <time datetime="{{model.flood.severityChanged}}">{{model.flood.severityChanged | formatDate}}</time><p>
          {% endif %}
          <p>{{model.flood.message}}</p>
          <p class="govuk-body-s">This information was last updated at <time class="govuk-!-font-weight-bold" datetime="{{model.flood.messageChanged}}">{{model.flood.messageChanged | formatDate}}</time></p>
        </div>
        {#
          <p>
            Could this information be better? <a href="/target-area/{{model.area.code}}/feedback">Tell us how to improve it</a>.
          </p>
        #}
      {% endif %}
    </div>

    <div class="govuk-grid-column-two-thirds">
      {% include "partials/before-during-after.html" %}
      {% include "partials/assisted-digital.html" %}      
      {#{% include "partials/social.html" %}#}
    </div>

  </div>

  <div class="govuk-grid-row">
    <div class="govuk-grid-column-full">
      {% include "partials/map.html" %}    
    </div>
  </div>
{% endblock %}

{% block bodyEnd %}
{{ super() }}
<script src="{{assetPath}}/javascripts/ol.js"></script>
  <script src="{{assetPath}}/javascripts/components/maps.js"></script>
  <script src="{{assetPath}}/javascripts/components/maps-styles.js"></script>
  <script src="{{assetPath}}/javascripts/components/maps-layers.js"></script>
  <script src="{{assetPath}}/javascripts/components/map-container.js"></script>
  <script src="{{assetPath}}/javascripts/components/maps/live.js"></script>
  <script src="{{assetPath}}/javascripts/templates.js"></script>
  <script src="{{ assetPath }}/nunjucks-slim.min.js"></script>
  <script>nunjucks.configure()</script>
<script>
  window.flood.model = {{ model | dump(2) | safe }}
</script>
<script src="{{assetPath}}/javascripts/pages/target-area.js"></script>
{% endblock %}
